# 体重トラッカー Webアプリ 開発実行計画書

## 1. プロジェクト概要

**目標**: 個人PC内で完結する軽量な体重記録Webアプリケーション（MVD）の開発  
**技術スタック**: Python 3.10+ / Streamlit 1.35 / Pandas / Plotly / SQLite3  
**開発期間**: 約5日（フェーズ毎に段階的実装）

---

## 2. 開発環境セットアップ

### 2-1 必要な作業
- [ ] Python仮想環境の作成
- [ ] 依存関係パッケージのインストール（requirements.txt作成）
- [ ] プロジェクトディレクトリ構成の作成
- [ ] 初回実行確認

### 2-2 ディレクトリ構成
```
weight-tracker/
├── main.py                 # メインアプリケーション
├── database.py             # データベース操作ヘルパー
├── utils.py                # ユーティリティ関数
├── requirements.txt        # 依存関係
├── README.md              # セットアップ手順
├── data/                  # データ格納フォルダ
│   └── data.db           # SQLiteデータベース
└── sample_data/           # サンプルデータ
    └── sample_weights.csv
```

---

## 3. 開発フェーズ別実行アクション

### Phase 1: データベース基盤構築（0.5日）

#### 実行アクション：
- [ ] `database.py` の作成
  - [ ] SQLiteヘルパークラスの実装
  - [ ] 自動スキーマ生成機能
  - [ ] CRUD操作メソッドの実装
- [ ] データベーステーブル定義
  - [ ] `measurements` テーブル（id, date, weight, body_fat）
  - [ ] `settings` テーブル（key, value）
- [ ] データベース初期化処理
- [ ] 基本的な接続テスト

#### 成果物：
- database.py（完成）
- data.db（自動生成）

### Phase 2: 入力フォーム実装（1日）

#### 実行アクション：
- [ ] `main.py` Streamlitアプリの基本構造作成
- [ ] 入力フォームUI実装
  - [ ] 日付入力（デフォルト：今日）
  - [ ] 体重入力（必須、範囲チェック）
  - [ ] 体脂肪率入力（任意、範囲チェック）
  - [ ] 送信ボタン
- [ ] データベース挿入処理
- [ ] 入力成功時のフィードバック表示

#### 成果物：
- main.py（基本フォーム完成）
- 動作確認済みの入力機能

### Phase 3: データバリデーション（0.5日）

#### 実行アクション：
- [ ] `utils.py` バリデーション関数の実装
- [ ] 入力値範囲チェック
  - [ ] 体重: 10kg ≤ 体重 ≤ 300kg
  - [ ] 体脂肪率: 0% ≤ 体脂肪率 ≤ 100%
- [ ] 日付妥当性チェック
  - [ ] 未来日付制限
  - [ ] 重複日付処理
- [ ] エラーメッセージの実装
- [ ] 必須項目チェック

#### 成果物：
- utils.py（バリデーション機能完成）
- 堅牢な入力処理

### Phase 4: グラフ描画機能（0.5日）

#### 実行アクション：
- [ ] Plotlyを使用したグラフ描画実装
- [ ] 折れ線グラフ（体重推移）
- [ ] 7日移動平均の計算と表示
- [ ] 体脂肪率のオプション表示
- [ ] グラフの見た目調整
- [ ] レスポンシブ対応

#### 成果物：
- 視覚的な体重推移グラフ
- 移動平均による傾向分析

### Phase 5: 期間フィルタ機能（0.5日）

#### 実行アクション：
- [ ] 期間選択ラジオボタンの実装
  - [ ] 7日間
  - [ ] 30日間
  - [ ] 90日間
  - [ ] 全期間
- [ ] セッション状態管理
- [ ] データフィルタリング処理
- [ ] 動的グラフ更新

#### 成果物：
- 期間選択機能
- 動的データ表示

### Phase 6: データ編集・削除機能（0.5日）

#### 実行アクション：
- [ ] `st.data_editor` を使用した編集機能
- [ ] インライン編集処理
- [ ] 行削除機能
- [ ] 更新・削除のデータベース反映
- [ ] 編集後の自動グラフ更新

#### 成果物：
- データ編集機能
- 直感的なデータ管理

### Phase 7: 目標体重機能（0.5日）

#### 実行アクション：
- [ ] サイドバーの目標体重入力フォーム
- [ ] 設定データの保存・読み込み
- [ ] 進捗バーの表示
- [ ] 目標達成状況の可視化

#### 成果物：
- 目標設定機能
- 進捗追跡機能

### Phase 8: 統計・CSV機能（0.5日）

#### 実行アクション：
- [ ] 統計カード実装
  - [ ] 直近7日/30日平均
  - [ ] 最大・最小値
  - [ ] 変化量
- [ ] CSVエクスポート機能
- [ ] CSVインポート機能
- [ ] 重複データ処理

#### 成果物：
- 統計情報表示
- データ I/O 機能

### Phase 9: UI/UX改善（0.5日）

#### 実行アクション：
- [ ] レスポンシブデザイン対応
- [ ] モバイル表示最適化
- [ ] ユーザビリティ改善
- [ ] エラーハンドリング強化
- [ ] 全体的な見た目調整

#### 成果物：
- 完成度の高いUI
- 多デバイス対応

---

## 4. 品質保証・テスト計画

### 4-1 機能テスト項目
- [ ] データ入力・保存の正常性
- [ ] バリデーション機能の動作
- [ ] グラフ描画の正確性
- [ ] 期間フィルタの動作
- [ ] データ編集・削除の動作
- [ ] CSV I/O の動作

### 4-2 非機能テスト項目
- [ ] パフォーマンス（0.5秒以内の画面更新）
- [ ] ブラウザ互換性（Chrome, Firefox, Safari, Edge）
- [ ] レスポンシブデザイン（最小幅320px）
- [ ] エラーハンドリング

---

## 5. 納品物リスト

### 5-1 ソースコード
- [ ] main.py（メインアプリケーション）
- [ ] database.py（データベース操作）
- [ ] utils.py（ユーティリティ）
- [ ] requirements.txt（依存関係）

### 5-2 ドキュメント
- [ ] README.md（セットアップ手順）
- [ ] 操作マニュアル
- [ ] データ移行手順書

### 5-3 テスト用データ
- [ ] サンプルデータ（CSV）
- [ ] テストケース実行記録

---

## 6. リスク管理

### 6-1 想定リスク
- [ ] SQLiteロック問題 → 1スレッド制限で対応
- [ ] モバイル表示崩れ → st.columns()の最小値指定で対応
- [ ] CSV重複データ → 一意制約チェックで対応

### 6-2 品質担保
- [ ] 各フェーズ完了時の動作確認
- [ ] 要件定義書との照合チェック
- [ ] ユーザビリティ確認

---

## 7. 開発開始前の確認事項

- [ ] 開発環境（Python 3.10+）の確認
- [ ] 必要パッケージのインストール可能性確認
- [ ] ワークスペースの権限確認
- [ ] ブラウザ動作環境の確認

---

**次のステップ**: 開発環境セットアップから開始し、Phase 1のデータベース基盤構築に進む 